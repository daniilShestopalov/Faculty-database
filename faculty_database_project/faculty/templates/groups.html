{% extends 'base.html' %}

<meta charset="UTF-8">

{% block title %}Список групп{% endblock %}

{% block content %}
<h1>Список групп</h1>

<p class="count">Количество групп: {{ count }}</p>

<!-- Кнопка для добавления группы -->
<a href="{% url 'group_add' %}" class="btn btn-custom">Добавить группу</a>

<!-- Таблица групп -->
<table class="table table-hover">
    <thead>
    <tr>
        <th>ID</th>
        <th>Номер группы</th>
        <th>Номер курса</th>
        <th>Направление</th>
        <th>Куратор</th>
        <th>Староста группы</th>
        <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    {% for group in page_group %}
    <tr>
        <td>{{ group.group_id }}</td>
        <td>{{ group.group_number }}</td>
        <td>{{ group.group_course_number }}</td>
        <td>{{ group.direction.direction_name }}</td>
        <td>
            {% if group.curator %}
            {{ group.curator.curator_second_name }} {{ group.curator.curator_first_name }}
            {% else %}
            Отсутствует
            {% endif %}
        </td>
        <td>
            {% if group.group_leader %}
            {{ group.group_leader.student_second_name }} {{ group.group_leader.student_first_name }}
            {% else %}
            Отсутствует
            {% endif %}
        </td>
        <td>
            <div class="buttons-container">
                <a href="{% url 'group_change' group.group_id %}" class="btn btn-custom">Изменить</a>
                <form action="{% url 'group_delete' group.group_id %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-custom"
                            onclick="return confirm('Вы уверены, что хотите удалить эту группу?');">Удалить
                    </button>
                </form>
            </div>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="7">Группы не найдены</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

<div class="pagination">
    <span class="step-links">
        {% if page_group.has_previous %}
            <a href="?page=1"><button class="btn btn-custom">&laquo; Первая</button></a>
            <a href="?page={{ page_group.previous_page_number }}"><button class="btn btn-custom">Предыдущая</button></a>
        {% endif %}

        {% for num in page_group.paginator.page_range %}
            {% if page_group.number == num %}
                <button class="btn btn-current">{{ num }}</button>
            {% elif num > page_group.number|add:'-6' and num < page_group.number|add:'6' %}
                <a href="?page={{ num }}"><button class="btn btn-custom">{{ num }}</button></a>
            {% elif num == 1 or num == page_group.paginator.num_pages %}
                <a href="?page={{ num }}"><button class="btn btn-custom">{{ num }}</button></a>
            {% elif num == page_group.number|add:'-6' or num == page_group.number|add:'6' %}
                <span>...</span>
            {% endif %}
        {% endfor %}

        {% if page_group.has_next %}
            <a href="?page={{ page_group.next_page_number }}"><button class="btn btn-custom">Следующая</button></a>
            <a href="?page={{ page_group.paginator.num_pages }}"><button
                    class="btn btn-custom">Последняя &raquo;</button></a>
        {% endif %}
    </span>
</div>
{% endblock %}
